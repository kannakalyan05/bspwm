#!/bin/sh


getDefaultSink() {
    defaultSink=$(pactl info | awk -F : '/Default Sink:/{print $2}')
    description=$(pactl list sinks | sed -n "/${defaultSink}/,/Description/s/^\s*Description: \(.*\)/\1/p")
    echo "${description}"
}

getDefaultSource() {
    defaultSource=$(pactl info | awk -F : '/Default Source:/{print $2}')
    description=$(pactl list sources | sed -n "/${defaultSource}/,/Description/s/^\s*Description: \(.*\)/\1/p")
    echo "${description}"
}
VOLUME=$(pamixer --get-volume-human)
SINK=$(getDefaultSink)
SOURCE=$(getDefaultSource)

# Notify
notify_user() {
  notify-send -h string:x-canonical-private-synchronous:sys-notify -u low "Volume: " -h int:value:"$VOLUME"
}


case $1 in
    "--inc")
        pamixer --increase 2 && notify_user
        ;;
    "--dec")
        pamixer --decrease 2 && notify_user
        ;;
    "--toggle")
        pamixer --toggle-mute && notify_user
        ;;
    *)
        echo "Source: ${SOURCE} | Sink: ${VOLUME} ${SINK}"
esac
